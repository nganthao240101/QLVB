
@{
    ViewBag.Title = "FormAdd";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Create</title>
</head>
<body>
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Nhập mới văn bản</h6>
        </div>
        <div class="card-body">
            <div class="container-fluid">
                <form  method="post" enctype="multipart/form-data" action="/QLNguoiDung/create">

                    <div class="row">
                        <div class="col-4">
                            <div class="form-group">
                                <label>Số văn bản</label>
                                <input class="form-control" type="text" value=" " name="SoVanBan" id="SoVanBan" required />
                            </div>
                            <div class="form-group">
                                <label>Ngày văn bản</label>
                                <input class="form-control" type="date" name="NgayVanBan" id="NgayVanBan" required />
                            </div>
                            <div class="form-group">
                                <label>Ký hiệu văn bản</label>
                                <input class="form-control" type="text" name="KyHieuVanBan" id="KyHieuVanBan" />
                            </div>
                            <div class="form-group">
                               <div class="form-group">
                                <label for="TinhTrang">Độ mật</label>
                                <select class="form-control" name="TinhTrang" id="MaDoMat">
                                    <option value="null" selected>--Chon--</option>
                                    <option value="true">Yêu cầu xử lý</option>
                                    <option value="false">Không yêu cầu xử lý</option>
                                </select>
                            </div>
                            </div>
                            <div class="form-group">
                                <label>Cơ quan ban hành</label>
                                <input class="form-control" type="text" name="CoQuanBanHanh" id="CoQuanBanHanh" required />
                            </div>
                            <div class="form-group">
                                <label for="NgonNgu">Ngôn ngữ</label>
                                <select class="form-control" name="NgonNgu" id="NgonNgu">
                                    <option value="null" selected>--Chon--</option>
                                    <option value="Tiếng Anh">Tiếng Anh</option>
                                    <option value="Tiếng Việt">Tiếng Việt</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="MaDoMat">Độ mật</label>
                                <select class="form-control" name="MaDoMat" id="MaDoMat">
                                    <option value="null" selected>--Chon--</option>
                                    <option value="1">Mật</option>
                                    <option value="2">Tuyệt mật</option>
                                </select>
                            </div>

                        </div>
                        <div class="col-4">
                            <div class="form-group">
                                <label>Trạng thái văn bản</label>
                                <select class="form-control" name="TrangThaiVanBan" id="TrangThaiVanBan">
                                    <option value="null" selected>--Chon--</option>
                                    <option value="true">Trong thời hạn sử dụng</option>
                                    <option value="false">Hết thời hạn sử dụng</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ngày đến</label>
                                <input class="form-control" type="date" name="NgayDen" id="NgayDen" required />
                            </div>
                            <div class="form-group">
                                <label>Số bản</label>
                                <input class="form-control" type="text" name="SoBan"id="SoBan" />
                            </div>
                            <div class="form-group">
                                <label>Họ tên người ký</label>
                                <input class="form-control" type="text" name="HoTenNguoiKy" id="HotenNguoiKy" />
                            </div>
                            <div class="form-group">
                                <label>Thủ trưởng duyệt</label>
                                <input class="form-control" type="text" name="ThuTruongDuyet" id="ThuTruongDuyet" />
                            </div>
                            <div class="form-group">
                                <label for="LinhVuc">Lĩnh vực</label>
                                <select class="form-control" name="MaLinhVuc" id="LinhVuc">
                                    <option value="null" selected>--Chọn--</option>
                                    <option value="1">Chính trị</option>
                                    <option value="2">Quân sự</option>
                                    <option value="3">Hậu cần kĩ thuật</option>
                                    
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="DoKhan">Độ khẩn</label>
                                <select class="form-control" name="MaDoKhan" id="MaDoKhan">
                                    <option value="null" selected>--Chọn--</option>
                                    <option value="1">Hỏa tốc</option>
                                    <option value="2">Thượng khẩn</option>
                                    <option value="3">Khẩn</option>
                                </select>
                            </div>

                        </div>
                        <div class="col-4">
                            <div class="form-group">
                                <label>Trạng thái xử lý</label>
                                <input class="form-control" type="date" value="Nhập mới" name="TrangThaiVanBan" id="TrangThaiVanBan" />
                                
                            </div>
                            <div class="form-group">
                                <label>Hạn giải quyết</label>
                                <input class="form-control" type="date" name="HanGiaiQuyet" id="HanGiaiQuyet" />
                            </div>
                            <div class="form-group">
                                <label>Số tờ</label>
                                <input class="form-control" type="text" name="SoTo" id="SoTo" />
                            </div>
                            <div class="form-group">
                                <label>Chức vụ người ký</label>
                                <input class="form-control" type="text" name="ChucVuNguoiKy" id="ChucVuNguoiKy" />
                            </div>
                            <div class="form-group">
                                <label>Số hồ sơ</label>
                                <input class="form-control" type="text" name="SoHoSo" id="SoHoSo" />
                            </div>
                            <div class="form-group">
                                <label for="MaLoaiVanBan">Loại văn bản</label>
                                <select class="form-control" name="MaLoaiVanBan" id="MaLoaiVanBan">
                                    <option value="null" selected>--Chọn--</option>
                                    <option value="1">Quyết định</option>
                                    <option value="2">Công văn</option>
                                    <option value="3">Nghị quyết</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ngày trả bảo mật</label>
                                <input class="form-control" type="date" name="NgayTraBaoMat" id="NgayTraBaoMat" />
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-group">
                                <label>Ghi chú</label>
                                <input class="form-control" type="text" name="GhiChu" id="GhiChu" />
                            </div>
                            <div class="form-group">
                                <label>Trích yếu</label>
                                <textarea class="form-control" rows="3" name="TrichYeu" id="TrichYeu"></textarea>
                            </div>
                            <div class="form-group">
                                <label>File đính kèm</label>
                                <input type="file" class="form-control-file" name="file" id="file" />
                            </div>
                            <button type="submit" class="btn btn-success btn-sm">Nhập mới</button>
                            <a href="@Url.Action("GetList", "VanBanDen")"><i class="btn btn-warning btn-sm">Quay lại</i></a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    const addVb = () => {
        const SoVanBan = $('#SoVanBan').val();
        const NgayVanBan = $('#NgayVanBan').val();

        const KyHieuVanBan = $('#KyHieuVanBan').val();
        const TinhTrang = $('#TinhTrang').val();
        const CoQuanBanHanh = $('#CoQuanBanHanh').val();
        const NgonNgu = $('#NgonNgu').val();
        const MaDoMat = $('#MaDoMat').val();
        const TrangThaiVanBan = $('#TrangThaiVanBan').val();
        const NgayDen = $('#NgayDen').val();
        const SoBan = $('#SoBan').val();
        const HoTenNguoiKy = $('#HoTenNguoiKy').val();
        const ThuTruongDuyet = $('#ThuTruongDuyet').val();
        const LinhVuc = $('#LinhVuc').val();
        const MaDoKhan = $('#MaDoKhan').val();
        const TrangThaiXuLy = $('#TrangThaiXuLy').val();
        const HanGiaiQuyet = $('#HanGiaiQuyet').val();
        const SoTo = $('#SoTo').val();
        const ChucVuNguoiKy = $('#ChucVuNguoiKy').val();
        const SoHoSo = $('#SoHoSo').val();
        const MaLoaiVanBan = $('#MaLoaiVanBan').val();
        const NgayTraBaoMat = $('#NgayTraBaoMat').val();

        const GhiChu = $('#GhiChu').val();
        const TrichYeu = $('#TrichYeu').val();

        if (MaLoaiVanBan == "None" || LinhVuc == "None" || NgonNgu == "None" || MaDoMat == "None" || MaDoKhan == "None") {
            alert("Vui lòng chọn đầy đủ thông tin");
            return;
        }
        let x1 = new Date(NgayVanBan);
        let x2 = new Date(NgayDen);
        if (x1 > x2) return;

        $.ajax({
            type: "POST",
            url: "/VanBanDen/Create",
            data: {
                SoVanBan, NgayVanBan, KyHieuVanBan, TinhTrang, CoQuanBanHanh, NgonNgu, MaDoMat, TrangThaiVanBan, NgayDen, SoBan, HoTenNguoiKy,
                NgayDen, SoBan, HoTenNguoiKy, ThuTruongDuyet, LinhVuc, MaDoKhan, TrangThaiXuLy, HanGiaiQuyet, SoTo, ChucVuNguoiKy, SoHoSo, MaLoaiVanBan, NgayTraBaoMat, GhiChu, TrichYeu
            },
            success: function (data) {
                alert('Thêm mới thành công')


            },
            error: function (data) {
                alert('Thêm mới không thành công')
            }

        })
    }
</script>
